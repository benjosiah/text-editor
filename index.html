<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>text Editor</title>

    <style>
        #text{

            width: 90%;
            height: 500px;
            margin: auto;
            padding: 50px 20px;
            overflow-y: scroll;
            overflow-x: hidden;
            position: relative;
            border: solid;
        }

        .tools{
            display: flex;
            flex-wrap: wrap;
            margin: auto;
            width: 90%;
            
        }

         ul{
            /* position: absolute; */
            top: 0;
            left: 0;
            right: 0;
            width: 100%;

        }
         ul li{
            display: inline;
           
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div class="tools" id="tools">
       
        
    </div>
    <div contenteditable="" class="text" id="text">
      
    </div>

    <script>
        let tools_div = document.getElementById('tools');
        let tools_di = document.getElementsByClassName('tools');
        let tools= [
            {"name": "bold","data":"bold", "icon":"" },
            {"name": "italic","data":"italic", "icon":"" },
            {"name": "justify-left","data":"justifyLeft", "icon":"" },
            {"name": "justify-right","data":"justifyRight", "icon":"" },
            {"name": "justify-center","data":"justifyCenter", "icon":"" },
            {"name": "underline","data":"underline", "icon":"" },
            {"name": "ordered-list","data":"insertOrderedList", "icon":"" },
            {"name": "unordered-list","data":"insertUnorderedlList", "icon":"" },
            {"name": "heading","data":"formatBlock", "icon":"", "list":['H1', 'H2', 'H3','H4', 'H5', 'H6']},
            {"name": "size","data":"fontSize", "icon":"", "list":[1,2,3,4,5,6,7,8,9,10] },
            {"name": "Background","data":"foreColor", "icon":"" },
            {"name": "colour","data":"hiliteColor", "icon":"" },
              
        ]

        tools.forEach(tool=>{

            // console.log(tool.list)
            if (tool.list) 
            {
                var action = "<select data-command='"+tool.data+"'>";
                   
                tool.list.forEach(e=>{
                   action += "<option value='"+e+"'>"+e+" </option>";
                })
          
                action += "<\/select>"

                let div = "<div class='' >"+action+"</div>";

                tools_div.innerHTML += div;
               
            }else if(tool.name=="Background" || tool.name=="colour"){
                
                var action = "<input type='color' data-command='"+tool.data+"'>";
                let div = "<div class='' >"+action+"</div>";

                tools_div.innerHTML += div;
            }
            else{
                var action = "<input type='button' value= '"+tool.name+"' data-command='"+tool.data+"'>";
                let div = "<div class='' >"+action+"</div>";

                tools_div.innerHTML += div;
            }
        });

     
        let text = document.getElementById('text').focus();
        for (let element of tools_di[0].children) {
            if (element.children[0].tagName=== "SELECT") {
                element.children[0].addEventListener("click", ()=>{
                    let u = element.children[0].dataset['command'];
                    let arg = element.children[0].value;
                    console.log(arg)
                    document.execCommand(u, false, arg);
                    // let text = document.getElementById('text').focus();
                    // console.log(r);
                })
            }
            else if(element.children[0].type === "color"){
                element.children[0].addEventListener("input", ()=>{
                    let u = element.children[0].dataset['command'];
                    let arg = element.children[0].value;
                    console.log(arg)
                    document.execCommand(u, false, arg);
                    // let text = document.getElementById('text').focus();
                    // console.log(r);
                })
            }
            else{
                element.addEventListener("click", ()=>{
                console.log(element.children[0])
                    let u = element.children[0].dataset['command'];
                    console.log(element.children[0].type)
                    // console.log(u)
                    document.execCommand(u, false,null);
                    // let text = document.getElementById('text').focus();
                    // console.log(r);
                })
            }
        }
    </script>
</body>
</html>